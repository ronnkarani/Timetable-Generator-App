{% extends 'base.html' %}

{% block title %}{{ title }} Details{% endblock %}

{% block content %}
<div class="detail-container">
  <h1>{{ title }} Details</h1>

  {% if type == "teacher" %}
    <h2>👨‍🏫 {{ object.name }}</h2>
    <p><strong>Teacher ID:</strong> {{ object.teacher_id }}</p>

    <h3>📚 Subjects & Streams</h3>
    {% if object.streamsubjectteacher_set.all %}
    <table>
      <tr>
        <th>Subject</th>
        <th>Stream/Class</th>
      </tr>
      {% for stt in object.streamsubjectteacher_set.all %}
      <tr>
        <td>{{ stt.subject.name }}</td>
        <td>{{ stt.stream.school_class.name }}{{ stt.stream.name }}</td>
      </tr>
      {% endfor %}
    </table>
    {% else %}
      <p>N/A – No subjects assigned.</p>
    {% endif %}

  {% elif type == "class" %}
    <h2>🏫 {{ object.name }}</h2>
    <h3>📌 Streams & Subjects</h3>
    {% if stream_assignments %}
        {% for stream, assignments in stream_assignments.items %}
            <h4>Stream: {{ stream.name }}</h4>
            {% if assignments %}
                <table>
                    <tr>
                        <th>Subject</th>
                        <th>Teacher</th>
                    </tr>
                    {% for stt in assignments %}
                        <tr>
                            <td>{{ stt.subject.name }}</td>
                            <td>{{ stt.teacher.name }}</td>
                        </tr>
                    {% endfor %}
                </table>
            {% else %}
                <p>No subjects assigned for this stream.</p>
            {% endif %}
        {% endfor %}
    {% else %}
        <p>No streams added yet.</p>
    {% endif %}


  {% elif type == "assignment" %}
    <h2>📘 Assignment ID: {{ object.id }}</h2>
    <p><strong>Stream:</strong> {{ object.stream }}</p>
    <p><strong>Subject:</strong> {{ object.subject }}</p>
    <p><strong>Teacher:</strong> {{ object.teacher }}</p>
  {% endif %}

  <div class="detail-actions">
    <a href="{% url return_url %}" class="action-btn back">⬅ Back</a>
    <a href="{% url edit_url object.id %}" class="action-btn edit">✏️ Edit</a>
    <a href="{% url delete_url object.id %}" class="action-btn delete">🗑️ Delete</a>
  </div>
</div>
{% endblock %}
