{% extends 'base.html' %}

{% block title %}Generated Timetables{% endblock %}

{% block content %}
<h1>ğŸ Auto-Generated Timetables</h1>
<p>âœ… Below are the automatically generated timetables for each class stream based on the assigned subjects and teachers.</p>

<div class="controls">
  <button class="btn-print" onclick="window.print()">ğŸ–¨ï¸ Print</button>
  <a href="{% url 'download_pdf' %}">â¬‡ï¸ Download PDF</a>
  <a href="{% url 'generate_timetables' %}?regenerate=1">ğŸ”„ Regenerate</a>
  

</div>

{% for stream, days in timetable_data.items %}
  <div class="timetable-container">
    <!-- Class stream title -->
    <h2 class="stream-title">{{ stream }}</h2>

    <table class="timetable">
      <thead>
        <tr>
          <th>DAY / TIME</th>
          {% for first_day_name, first_day_slots in days.items %}
            {% if forloop.first %}
              {% for slot_time, entry in first_day_slots.items %}
                <th>{{ slot_time }}</th>
              {% endfor %}
            {% endif %}
          {% endfor %}
        </tr>
      </thead>
      <tbody>
        {% for day_name, slots in days.items %}
          <tr>
            <td>{{ day_name|upper }}</td>
            {% for slot_time, entry in slots.items %}
              {% if entry.is_break %}
                <td class="break">{{ entry.subject }}</td>
              {% else %}
                <td class="subject">
                  <b>{{ entry.subject }}</b><br>
                  <small>{{ entry.teacher }}</small>
                </td>
              {% endif %}
            {% endfor %}
          </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
{% endfor %}


{% endblock %}
